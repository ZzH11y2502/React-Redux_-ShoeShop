{"ast":null,"code":"import { shoeArr } from \"../../../Ex_Shoe/data\";\nlet initialState = {\n  shoeArr: shoeArr,\n  detail: shoeArr[0],\n  cart: []\n};\nexport let shoeReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case \"VIEW_DETAIL\":\n      return {\n        ...state,\n        detail: action.payload\n      };\n    case \"ADD_TO_CART\":\n      {\n        // spread operator\n        // const newCart = [...this.state.cart, shoe]\n\n        const newCart = [...state.cart];\n        let shoe = action.payload;\n        // Kiểm tra trong cart đã tồn tại sản phẩm hay chưa\n        const index = newCart.findIndex(value => value.id === shoe.id);\n        if (index !== -1) {\n          // sản phẩm đã có trong cart => chỉ thay đổi thuộc tính cartQuantity\n          newCart[index].cartQuantity += 1;\n        } else {\n          // sản phẩm chưa có trong cart => thêm vào cart\n          newCart.push({\n            ...shoe,\n            cartQuantity: 1\n          });\n        }\n        console.log(\"newCart: \", newCart);\n        state.cart = newCart;\n        return {\n          ...state\n        };\n      }\n    case \"CHECK_Quantity\":\n      {\n        const newCart = [...state.cart];\n        let shoeId = action.payload;\n        let quantity = action.value;\n        const index = newCart.findIndex(value => value.id === shoeId);\n        if (index !== -1) {\n          newCart[index].cartQuantity = newCart[index].cartQuantity + quantity || 1;\n          // 0 || 1\n        }\n\n        state.cart = newCart;\n        return {\n          ...state\n        };\n      }\n    case \"REMOVE_SHOE\":\n      {\n        let idShoe = action.payload;\n        // idShoe là id của item được click btn delete\n        let newCart = [...state.cart];\n        newCart = this.state.cart.filter(item => {\n          return item.id !== idShoe;\n        });\n        this.setState({\n          cart: newCart\n        });\n      }\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["shoeArr","initialState","detail","cart","shoeReducer","state","action","type","payload","newCart","shoe","index","findIndex","value","id","cartQuantity","push","console","log","shoeId","quantity","idShoe","filter","item","setState"],"sources":["D:/Cybersoft/FE/React-Redux/src/Ex_Shoe_Redux/redux/reducer/shoe.js"],"sourcesContent":["import { shoeArr } from \"../../../Ex_Shoe/data\";\r\nlet initialState = {\r\n  shoeArr: shoeArr,\r\n  detail: shoeArr[0],\r\n  cart: [],\r\n};\r\n\r\nexport let shoeReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"VIEW_DETAIL\":\r\n      return {\r\n        ...state,\r\n        detail: action.payload,\r\n      };\r\n    case \"ADD_TO_CART\": {\r\n      // spread operator\r\n      // const newCart = [...this.state.cart, shoe]\r\n\r\n      const newCart = [...state.cart];\r\n      let shoe = action.payload;\r\n      // Kiểm tra trong cart đã tồn tại sản phẩm hay chưa\r\n      const index = newCart.findIndex((value) => value.id === shoe.id);\r\n\r\n      if (index !== -1) {\r\n        // sản phẩm đã có trong cart => chỉ thay đổi thuộc tính cartQuantity\r\n        newCart[index].cartQuantity += 1;\r\n      } else {\r\n        // sản phẩm chưa có trong cart => thêm vào cart\r\n        newCart.push({ ...shoe, cartQuantity: 1 });\r\n      }\r\n\r\n      console.log(\"newCart: \", newCart);\r\n\r\n      state.cart = newCart;\r\n      return { ...state };\r\n    }\r\n    case \"CHECK_Quantity\": {\r\n      const newCart = [...state.cart];\r\n      let shoeId = action.payload;\r\n      let quantity = action.value;\r\n      const index = newCart.findIndex((value) => value.id === shoeId);\r\n\r\n      if (index !== -1) {\r\n        newCart[index].cartQuantity =\r\n          newCart[index].cartQuantity + quantity || 1;\r\n        // 0 || 1\r\n      }\r\n\r\n      state.cart = newCart;\r\n      return { ...state };\r\n    }\r\n    case \"REMOVE_SHOE\": {\r\n      let idShoe = action.payload;\r\n      // idShoe là id của item được click btn delete\r\n      let newCart = [...state.cart];\r\n      newCart = this.state.cart.filter((item) => {\r\n        return item.id !== idShoe;\r\n      });\r\n      this.setState({ cart: newCart });\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,uBAAuB;AAC/C,IAAIC,YAAY,GAAG;EACjBD,OAAO,EAAEA,OAAO;EAChBE,MAAM,EAAEF,OAAO,CAAC,CAAC,CAAC;EAClBG,IAAI,EAAE;AACR,CAAC;AAED,OAAO,IAAIC,WAAW,GAAGA,CAACC,KAAK,GAAGJ,YAAY,EAAEK,MAAM,KAAK;EACzD,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAK,aAAa;MAChB,OAAO;QACL,GAAGF,KAAK;QACRH,MAAM,EAAEI,MAAM,CAACE;MACjB,CAAC;IACH,KAAK,aAAa;MAAE;QAClB;QACA;;QAEA,MAAMC,OAAO,GAAG,CAAC,GAAGJ,KAAK,CAACF,IAAI,CAAC;QAC/B,IAAIO,IAAI,GAAGJ,MAAM,CAACE,OAAO;QACzB;QACA,MAAMG,KAAK,GAAGF,OAAO,CAACG,SAAS,CAAEC,KAAK,IAAKA,KAAK,CAACC,EAAE,KAAKJ,IAAI,CAACI,EAAE,CAAC;QAEhE,IAAIH,KAAK,KAAK,CAAC,CAAC,EAAE;UAChB;UACAF,OAAO,CAACE,KAAK,CAAC,CAACI,YAAY,IAAI,CAAC;QAClC,CAAC,MAAM;UACL;UACAN,OAAO,CAACO,IAAI,CAAC;YAAE,GAAGN,IAAI;YAAEK,YAAY,EAAE;UAAE,CAAC,CAAC;QAC5C;QAEAE,OAAO,CAACC,GAAG,CAAC,WAAW,EAAET,OAAO,CAAC;QAEjCJ,KAAK,CAACF,IAAI,GAAGM,OAAO;QACpB,OAAO;UAAE,GAAGJ;QAAM,CAAC;MACrB;IACA,KAAK,gBAAgB;MAAE;QACrB,MAAMI,OAAO,GAAG,CAAC,GAAGJ,KAAK,CAACF,IAAI,CAAC;QAC/B,IAAIgB,MAAM,GAAGb,MAAM,CAACE,OAAO;QAC3B,IAAIY,QAAQ,GAAGd,MAAM,CAACO,KAAK;QAC3B,MAAMF,KAAK,GAAGF,OAAO,CAACG,SAAS,CAAEC,KAAK,IAAKA,KAAK,CAACC,EAAE,KAAKK,MAAM,CAAC;QAE/D,IAAIR,KAAK,KAAK,CAAC,CAAC,EAAE;UAChBF,OAAO,CAACE,KAAK,CAAC,CAACI,YAAY,GACzBN,OAAO,CAACE,KAAK,CAAC,CAACI,YAAY,GAAGK,QAAQ,IAAI,CAAC;UAC7C;QACF;;QAEAf,KAAK,CAACF,IAAI,GAAGM,OAAO;QACpB,OAAO;UAAE,GAAGJ;QAAM,CAAC;MACrB;IACA,KAAK,aAAa;MAAE;QAClB,IAAIgB,MAAM,GAAGf,MAAM,CAACE,OAAO;QAC3B;QACA,IAAIC,OAAO,GAAG,CAAC,GAAGJ,KAAK,CAACF,IAAI,CAAC;QAC7BM,OAAO,GAAG,IAAI,CAACJ,KAAK,CAACF,IAAI,CAACmB,MAAM,CAAEC,IAAI,IAAK;UACzC,OAAOA,IAAI,CAACT,EAAE,KAAKO,MAAM;QAC3B,CAAC,CAAC;QACF,IAAI,CAACG,QAAQ,CAAC;UAAErB,IAAI,EAAEM;QAAQ,CAAC,CAAC;MAClC;IACA;MACE,OAAOJ,KAAK;EAChB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}